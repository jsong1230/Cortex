# F-09 ì›¹ ì•„ì´í…œ ìƒì„¸ -- ê¸°ëŠ¥ ì„¤ê³„ì„œ

**ë²„ì „**: 1.0 | **ë‚ ì§œ**: 2026-02-28 | **ìƒíƒœ**: í™•ì •
**ì°¸ì¡°**: `docs/system/erd.md`, `docs/system/api-conventions.md`, `docs/system/design-system.md`, `docs/system/navigation.md`

---

## 1. ê¸°ëŠ¥ ê°œìš”

### 1.1 ëª©ì 

ë¸Œë¦¬í•‘ ì¹´ë“œë¥¼ íƒ­í•˜ë©´ ì—´ë¦¬ëŠ” ì•„ì´í…œ ìƒì„¸ í˜ì´ì§€ë¥¼ êµ¬í˜„í•œë‹¤. AI ìš”ì•½ ì „ë¬¸, ì›ë¬¸ ë§í¬, íƒœê·¸, ë¸Œë¦¬í•‘ ì„ ì • ì´ìœ ë¥¼ í‘œì‹œí•˜ê³ , ë©”ëª¨ë¥¼ ì…ë ¥/ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©°, ê°™ì€ íƒœê·¸ë¥¼ ê³µìœ í•˜ëŠ” ê´€ë ¨ ì•„ì´í…œì„ í•˜ë‹¨ì— ì¶”ì²œí•œë‹¤.

### 1.2 ì¸ìˆ˜ì¡°ê±´ (features.md #F-09)

| ID | ì¡°ê±´ |
|----|------|
| AC1 | `/item/[id]` ë¼ìš°íŠ¸ì—ì„œ ê°œë³„ ì½˜í…ì¸  ìƒì„¸ ì •ë³´ë¥¼ í‘œì‹œí•œë‹¤ |
| AC2 | AI ìš”ì•½ ì „ë¬¸, ì›ë¬¸ ë§í¬, ì†ŒìŠ¤, ìˆ˜ì§‘ ì‹œê°„ì´ í‘œì‹œëœë‹¤ |
| AC3 | ë©”ëª¨ ì…ë ¥ í•„ë“œê°€ ì œê³µë˜ë©° ì €ì¥ ì‹œ user_interactionsì— interaction='ë©”ëª¨'ë¡œ ê¸°ë¡ëœë‹¤ |
| AC4 | ê´€ë ¨ ì•„ì´í…œ(ê°™ì€ í† í”½) ëª©ë¡ì´ í•˜ë‹¨ì— í‘œì‹œëœë‹¤ |

---

## 2. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ë°ì´í„° íë¦„

```
ë¸Œë¼ìš°ì €(/item/[id]) â†’ ItemDetailPage â†’ GET /api/content/[id]
                                              |
                                        Supabase Auth ê²€ì¦
                                              |
                                        content_items ë‹¨ê±´ ì¡°íšŒ
                                              |
                                        user_interactions ì¡°íšŒ (ë©”ëª¨ + ìµœì‹  ë°˜ì‘)
                                              |
                                        briefings ì¡°íšŒ (reason ì¶”ì¶œ)
                                              |
                                        content_items ê´€ë ¨ ì•„ì´í…œ ì¡°íšŒ (tags ê¸°ë°˜)
                                              |
                                        ContentDetailResponse ë°˜í™˜
```

### 2.2 ì•„í‚¤í…ì²˜ ê²°ì •

#### ê²°ì • 1: í˜ì´ì§€ ë Œë”ë§ ë°©ì‹

- **ì„ íƒì§€**: A) ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ DB ì¡°íšŒ / B) í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ + API Route
- **ê²°ì •**: B) í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ + API Route
- **ê·¼ê±°**: F-08ê³¼ ë™ì¼í•œ íŒ¨í„´ ìœ ì§€. FeedbackButtons (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)ì™€ MemoInputì´ í´ë¼ì´ì–¸íŠ¸ ì¸í„°ë™ì…˜ì„ ìš”êµ¬í•˜ë¯€ë¡œ, API ê¸°ë°˜ ë°ì´í„° í˜ì¹­ì´ ì¼ê´€ì„± ìˆë‹¤.

#### ê²°ì • 2: ê´€ë ¨ ì•„ì´í…œ ì¡°íšŒ ë°©ì‹

- **ì„ íƒì§€**: A) pgvector ì„ë² ë”© ìœ ì‚¬ë„ ê²€ìƒ‰ / B) tags ë°°ì—´ ê²¹ì¹¨(overlap) ì¿¼ë¦¬
- **ê²°ì •**: B) tags ë°°ì—´ ê²¹ì¹¨ ì¿¼ë¦¬ (`&&` ì—°ì‚°ì)
- **ê·¼ê±°**: F-13(í•™ìŠµ ì—”ì§„)ì´ ì•„ì§ ë¯¸êµ¬í˜„ì´ë¯€ë¡œ ì„ë² ë”©ì´ ëŒ€ë¶€ë¶„ nullì´ë‹¤. tagsëŠ” ì´ë¯¸ AIê°€ ì¶”ì¶œí•˜ì—¬ ì €ì¥í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì¦‰ì‹œ í™œìš© ê°€ëŠ¥í•˜ë‹¤. F-13 êµ¬í˜„ í›„ pgvectorë¡œ ì „í™˜í•  ìˆ˜ ìˆë‹¤.

#### ê²°ì • 3: ë©”ëª¨ ì €ì¥ ë°©ì‹

- **ì„ íƒì§€**: A) ê¸°ì¡´ POST /api/interactions ì¬ì‚¬ìš© / B) ë³„ë„ PATCH /api/content/[id]/memo ì‹ ê·œ
- **ê²°ì •**: A) ê¸°ì¡´ POST /api/interactions ì¬ì‚¬ìš©
- **ê·¼ê±°**: interaction='ë©”ëª¨' + memo_text ì¡°í•©ì´ ì´ë¯¸ F-08ì—ì„œ êµ¬í˜„ë˜ì–´ ìˆë‹¤. briefing_idê°€ í•„ìš”í•œë°, ìƒì„¸ í˜ì´ì§€ì—ì„œëŠ” ì§„ì… ê²½ë¡œì— ë”°ë¼ briefing_idë¥¼ ì „ë‹¬ë°›ê±°ë‚˜, ê°€ì¥ ìµœê·¼ briefingì—ì„œ í•´ë‹¹ content_idë¥¼ í¬í•¨í•œ briefing_idë¥¼ ì¡°íšŒí•œë‹¤.

### 2.3 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
app/(web)/item/[id]/page.tsx          -- ì•„ì´í…œ ìƒì„¸ í˜ì´ì§€ (ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë˜í¼)
  components/item/ItemDetailView.tsx  -- ë°ì´í„° í˜ì¹­ + ë ˆì´ì•„ì›ƒ (í´ë¼ì´ì–¸íŠ¸)
    components/briefing/ChannelBadge.tsx   -- ì¬ì‚¬ìš©
    components/item/ItemMeta.tsx          -- ì†ŒìŠ¤, ìˆ˜ì§‘ ì‹œê°„, íƒœê·¸ í‘œì‹œ
    components/item/AISummarySection.tsx   -- AI ìš”ì•½ ì „ë¬¸ í‘œì‹œ
    components/item/OriginalLink.tsx       -- ì›ë¬¸ ë§í¬ (ì™¸ë¶€ íƒ­ ì—´ê¸°)
    components/item/MemoInput.tsx          -- ë©”ëª¨ textarea + ì €ì¥
    components/briefing/FeedbackButtons.tsx -- ì¬ì‚¬ìš©
    components/item/RelatedItems.tsx       -- ê´€ë ¨ ì•„ì´í…œ ëª©ë¡
```

### 2.4 ì¸ì¦ ì „ëµ

- F-08ê³¼ ë™ì¼: `lib/supabase/auth.ts`ì˜ `getAuthUser()` ì‚¬ìš©
- API Routeì—ì„œ ì„¸ì…˜ ê²€ì¦, ì—†ìœ¼ë©´ 401 ë°˜í™˜

---

## 3. API ì„¤ê³„

### 3.1 GET /api/content/[id]

**ëª©ì **: ê°œë³„ ì½˜í…ì¸  ì•„ì´í…œì˜ ìƒì„¸ ì •ë³´ë¥¼ ë°˜í™˜í•œë‹¤.

**ì¸ì¦**: Supabase Auth ì„¸ì…˜ (ì¿ í‚¤)

**ì²˜ë¦¬ ìˆœì„œ**:
1. `getAuthUser()`ë¡œ ì„¸ì…˜ ê²€ì¦ (ì‹¤íŒ¨ ì‹œ 401)
2. URL íŒŒë¼ë¯¸í„°ì—ì„œ `id` ì¶”ì¶œ
3. `content_items` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ì•„ì´í…œ ë‹¨ê±´ ì¡°íšŒ
4. ì•„ì´í…œ ì—†ìœ¼ë©´ 404 + `CONTENT_NOT_FOUND` ë°˜í™˜
5. `user_interactions` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ content_idì˜ ë°˜ì‘ ì¡°íšŒ (ìµœì‹  ë°˜ì‘ + ê¸°ì¡´ ë©”ëª¨)
6. `briefings` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ content_idë¥¼ í¬í•¨í•˜ëŠ” ê°€ì¥ ìµœê·¼ briefingì˜ reason ì¶”ì¶œ
7. `content_items` í…Œì´ë¸”ì—ì„œ tags ê²¹ì¹¨ ê¸°ë°˜ ê´€ë ¨ ì•„ì´í…œ ì¡°íšŒ (ìê¸° ìì‹  ì œì™¸, ìµœëŒ€ 5ê±´)
8. ì‘ë‹µ ì¡°ë¦½ í›„ 200 ë°˜í™˜

**ì¿¼ë¦¬ ìµœì í™”**:
- content_items: `id`, `title`, `summary_ai`, `source`, `source_url`, `tags`, `channel`, `collected_at` SELECT
- user_interactions: content_id ê¸°ì¤€ ìµœì‹  ë°˜ì‘ 1ê±´ + ê°€ì¥ ìµœê·¼ ë©”ëª¨ í…ìŠ¤íŠ¸
- briefings: items JSONB ë‚´ content_id í¬í•¨ ì—¬ë¶€ í™•ì¸ (ìµœì‹  1ê±´)
- ê´€ë ¨ ì•„ì´í…œ: tags overlap(`&&`) + collected_at DESC + LIMIT 5

**ì‘ë‹µ í˜•ì‹**:

```typescript
interface ContentDetailResponse {
  success: true;
  data: {
    content_id: string;
    channel: string;
    title: string;
    summary_ai: string | null;
    source: string;
    source_url: string;
    tags: string[] | null;
    collected_at: string;         // ISO 8601
    reason: string | null;        // briefings.items[].reason
    briefing_id: string | null;   // FeedbackButtonsì— ì „ë‹¬ìš©
    user_interaction: string | null;
    memo_text: string | null;     // ê¸°ì¡´ ë©”ëª¨ (ìˆìœ¼ë©´)
    related_items: Array<{
      content_id: string;
      channel: string;
      title: string;
      summary_ai: string | null;
      source: string;
      source_url: string;
    }>;
  };
}
```

**ì—ëŸ¬ ì¼€ì´ìŠ¤**:

| HTTP ì½”ë“œ | errorCode | ìƒí™© |
|-----------|-----------|------|
| 401 | `AUTH_REQUIRED` | ì„¸ì…˜ ì—†ìŒ |
| 404 | `CONTENT_NOT_FOUND` | content_idì— í•´ë‹¹í•˜ëŠ” ì•„ì´í…œ ì—†ìŒ |
| 500 | - | DB ì¡°íšŒ ì˜¤ë¥˜ |

---

## 4. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 4.1 ItemDetailView

ë°ì´í„° í˜ì¹­ê³¼ ì „ì²´ ë ˆì´ì•„ì›ƒì„ ë‹´ë‹¹í•˜ëŠ” ìµœìƒìœ„ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸.

**ìƒíƒœ**:
- `loading`: ìŠ¤ì¼ˆë ˆí†¤ UI í‘œì‹œ
- `error`: ì—ëŸ¬ ë©”ì‹œì§€ + ì¬ì‹œë„ ë²„íŠ¼
- `notFound`: ì•„ì´í…œ ì—†ìŒ ì•ˆë‚´ + í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
- `success`: ìƒì„¸ ì •ë³´ ë Œë”ë§

**Props**:
| ì†ì„± | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `contentId` | `string` | URLì—ì„œ ì¶”ì¶œí•œ ì½˜í…ì¸  ID |

### 4.2 AISummarySection

AI ìš”ì•½ ì „ë¬¸ì„ í‘œì‹œí•˜ëŠ” ì„¹ì…˜.

**ìŠ¤íƒ€ì¼**:
- ë°°ê²½: `#F8F7F4` (canvas), íŒ¨ë”©: `16px 20px`, ëª¨ì„œë¦¬: `12px`
- ì™¼ìª½ ë³´ë”: `3px solid {ì±„ë„ í¬ì¸íŠ¸ìƒ‰}` (ì±„ë„ ì‹œê·¸ë‹ˆì²˜ ìœ ì§€)
- í°íŠ¸: `text-body` (16px, line-height 1.7)
- ì œëª© "AI ìš”ì•½": `text-small` (14px), `text-secondary` (#5C5C5C), ë³¼ë“œ

### 4.3 ItemMeta

ì†ŒìŠ¤, ìˆ˜ì§‘ ì‹œê°„, íƒœê·¸ë¥¼ í‘œì‹œí•˜ëŠ” ë©”íƒ€ ì •ë³´ ì˜ì—­.

**í‘œì‹œ í•­ëª©**:
- ì†ŒìŠ¤ëª… (source)
- ìˆ˜ì§‘ ì‹œê°„ (collected_at â†’ KST ë³€í™˜, "2026.02.28 07:30" í˜•ì‹)
- íƒœê·¸ ëª©ë¡ (tags ë°°ì—´, ì¹© í˜•íƒœ)

**íƒœê·¸ ìŠ¤íƒ€ì¼**:
- íŒ¨ë”©: `4px 10px`, ëª¨ì„œë¦¬: `12px` (pill)
- ë°°ê²½: `#F3F2EF`, í…ìŠ¤íŠ¸: `#5C5C5C`, í°íŠ¸: 12px 500
- ê°„ê²©: `6px`

### 4.4 OriginalLink

ì›ë¬¸ ê¸°ì‚¬ë¡œ ì´ë™í•˜ëŠ” CTA ë²„íŠ¼.

**ìŠ¤íƒ€ì¼**:
- ë†’ì´: `48px`, ëª¨ì„œë¦¬: `8px`
- ë°°ê²½: `#2563EB` (info), í…ìŠ¤íŠ¸: `#FFFFFF`, í°íŠ¸: 16px 500
- ì•„ì´ì½˜: ì™¸ë¶€ ë§í¬ (â†—)
- width: `100%` (ëª¨ë°”ì¼), max-width: `320px` (ë°ìŠ¤í¬í†±)
- í´ë¦­ ì‹œ ìƒˆ íƒ­ ì—´ê¸° (`target="_blank" rel="noopener noreferrer"`)
- í´ë¦­ ì‹œ 'ì›¹ì—´ê¸°' interaction ê¸°ë¡ (POST /api/interactions)

### 4.5 MemoInput

ë©”ëª¨ ì‘ì„±/ìˆ˜ì • ì˜ì—­.

**êµ¬ì„±**:
- `<textarea>`: ìµœì†Œ ë†’ì´ 120px, auto-resize (max 300px)
- ì €ì¥ ë²„íŠ¼: ë†’ì´ 44px, ë°°ê²½ `#7C3AED` (ë©”ëª¨ í™œì„±ìƒ‰), í…ìŠ¤íŠ¸ `#FFFFFF`
- ì„±ê³µ í”¼ë“œë°±: "ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤" í† ìŠ¤íŠ¸ (2ì´ˆ í›„ ì‚¬ë¼ì§)
- ê¸°ì¡´ ë©”ëª¨ê°€ ìˆìœ¼ë©´ textareaì— pre-fill

**ì €ì¥ ë¡œì§**:
1. ì €ì¥ ë²„íŠ¼ í´ë¦­
2. POST /api/interactions í˜¸ì¶œ (interaction='ë©”ëª¨', memo_text=ì…ë ¥ê°’)
3. ì„±ê³µ: í† ìŠ¤íŠ¸ í‘œì‹œ + ë²„íŠ¼ "ì €ì¥ ì™„ë£Œ" ì¼ì‹œ ë³€ê²½
4. ì‹¤íŒ¨: ì—ëŸ¬ í† ìŠ¤íŠ¸

**ìŠ¤íƒ€ì¼**:
- textarea ë°°ê²½: `#F3F2EF`, í…Œë‘ë¦¬: `1px solid #E5E3DF`, í¬ì»¤ìŠ¤: `2px solid #7C3AED`
- ëª¨ì„œë¦¬: `8px`, íŒ¨ë”©: `12px`
- í°íŠ¸: `text-body` (16px)
- í”Œë ˆì´ìŠ¤í™€ë”: "ì´ ì•„ì´í…œì— ëŒ€í•œ ë©”ëª¨ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”..." (#9E9E9E)

### 4.6 RelatedItems

ê°™ì€ íƒœê·¸ë¥¼ ê³µìœ í•˜ëŠ” ê´€ë ¨ ì•„ì´í…œ ëª©ë¡ (ìµœëŒ€ 5ê±´).

**êµ¬ì„±**:
- ì„¹ì…˜ ì œëª©: "ê´€ë ¨ ì•„ì´í…œ" (`text-title`, 18px 600)
- ê° ì•„ì´í…œ: ê°„ëµ ì¹´ë“œ (ChannelBadge + ì œëª© + 1ì¤„ ìš”ì•½)
- ì œëª© íƒ­ ì‹œ `/item/[related_id]`ë¡œ ì´ë™

**ê°„ëµ ì¹´ë“œ ìŠ¤íƒ€ì¼**:
- ë°°ê²½: `#FFFFFF`, í…Œë‘ë¦¬: `1px solid #E5E3DF`
- ëª¨ì„œë¦¬: `8px`, íŒ¨ë”©: `12px`
- ì±„ë„ ë±ƒì§€ + ì œëª© (1ì¤„, ë§ì¤„ì„)
- ìš”ì•½: 1ì¤„, `text-secondary`, ë§ì¤„ì„
- ê°„ê²©: `8px`
- ë¹ˆ ìƒíƒœ: "ê´€ë ¨ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤" í…ìŠ¤íŠ¸ (ê´€ë ¨ ì•„ì´í…œ 0ê±´ì¼ ë•Œ)

---

## 5. í˜ì´ì§€ ë ˆì´ì•„ì›ƒ

### 5.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†ë’¤ë¡œ]                                 â”‚  BackButton
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì±„ë„ ë±ƒì§€]  ì†ŒìŠ¤ëª…                      â”‚
â”‚                                         â”‚
â”‚ ê¸°ì‚¬ ì œëª© (display í°íŠ¸, ìµœëŒ€ 3ì¤„)       â”‚
â”‚                                         â”‚
â”‚ ìˆ˜ì§‘ ì‹œê°„: 2026.02.28 07:30              â”‚  ItemMeta
â”‚ [íƒœê·¸1] [íƒœê·¸2] [íƒœê·¸3]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI ìš”ì•½                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI ìš”ì•½ ì „ë¬¸ í…ìŠ¤íŠ¸ ...             â”‚ â”‚  AISummarySection
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ ì§€ë‚œì£¼ ë©”ëª¨: "MSA ì „í™˜" ê´€ë ¨ (ì„ íƒì ) â”‚  reason hint
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  [ì›ë¬¸ ê¸°ì‚¬ ì½ê¸° â†—]                 â”‚ â”‚  OriginalLink
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ‘ ì¢‹ì•„ìš”] [ğŸ‘ ì‹«ì–´ìš”] [ğŸ”– ì €ì¥] [ğŸ’¬ ë©”ëª¨] â”‚  FeedbackButtons
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë©”ëª¨                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ (textarea)                          â”‚ â”‚  MemoInput
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ì €ì¥]                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê´€ë ¨ ì•„ì´í…œ                              â”‚  RelatedItems
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [ì±„ë„ë±ƒì§€] ê´€ë ¨ ê¸°ì‚¬ ì œëª© 1         â”‚ â”‚
â”‚ â”‚ 1ì¤„ ìš”ì•½ ...                        â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ [ì±„ë„ë±ƒì§€] ê´€ë ¨ ê¸°ì‚¬ ì œëª© 2         â”‚ â”‚
â”‚ â”‚ 1ì¤„ ìš”ì•½ ...                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 BackButton

- ìœ„ì¹˜: í˜ì´ì§€ ìµœìƒë‹¨
- í…ìŠ¤íŠ¸: "â† ë’¤ë¡œ" (ëª¨ë°”ì¼), "â† ë¸Œë¦¬í•‘ìœ¼ë¡œ ëŒì•„ê°€ê¸°" (ë°ìŠ¤í¬í†±)
- í´ë¦­: `router.back()` (ê¸°ë³¸), ì§ì ‘ ì ‘ê·¼ ì‹œ `/`ë¡œ ì´ë™
- ë†’ì´: 44px (í„°ì¹˜ íƒ€ê²Ÿ), ìƒ‰ìƒ: `#5C5C5C`

### 5.3 ë°˜ì‘í˜• ë™ì‘

| ìš”ì†Œ | ëª¨ë°”ì¼ (375px~) | ë°ìŠ¤í¬í†± (1024px~) |
|------|----------------|-------------------|
| ìµœëŒ€ ë„ˆë¹„ | 100% | 640px ì¤‘ì•™ ì •ë ¬ |
| í˜ì´ì§€ ì—¬ë°± | 16px | auto |
| ì œëª© í°íŠ¸ | 20px (headline) | 24px (display) |
| í•˜ë‹¨ ì—¬ë°± | 72px (BottomNav ë³´ì •) | 32px |

---

## 6. DB ì¿¼ë¦¬ ì„¤ê³„

### 6.1 ì½˜í…ì¸  ë‹¨ê±´ ì¡°íšŒ

```sql
SELECT id, channel, title, summary_ai, source, source_url, tags, collected_at
FROM content_items
WHERE id = '{content_id}'
LIMIT 1;
```

**ì‚¬ìš© ì¸ë±ìŠ¤**: `content_items.id` (PK)

### 6.2 ì‚¬ìš©ì ë°˜ì‘ ì¡°íšŒ (ìµœì‹  ë°˜ì‘ + ë©”ëª¨)

```sql
-- ìµœì‹  ë°˜ì‘ (ë©”ëª¨ ì œì™¸)
SELECT interaction
FROM user_interactions
WHERE content_id = '{content_id}'
  AND interaction != 'ë©”ëª¨'
ORDER BY created_at DESC
LIMIT 1;

-- ìµœì‹  ë©”ëª¨ í…ìŠ¤íŠ¸
SELECT memo_text
FROM user_interactions
WHERE content_id = '{content_id}'
  AND interaction = 'ë©”ëª¨'
ORDER BY created_at DESC
LIMIT 1;
```

**ì‚¬ìš© ì¸ë±ìŠ¤**: `idx_interactions_content` (`content_id`)

### 6.3 ë¸Œë¦¬í•‘ reason ì¡°íšŒ

```sql
SELECT id, items
FROM briefings
WHERE items @> '[{"content_id": "{content_id}"}]'::jsonb
ORDER BY briefing_date DESC
LIMIT 1;
```

> JSONB `@>` ì—°ì‚°ìë¡œ items ë°°ì—´ ë‚´ content_id í¬í•¨ ì—¬ë¶€ë¥¼ ê²€ìƒ‰í•œë‹¤.
> ê²°ê³¼ì˜ items ë°°ì—´ì—ì„œ í•´ë‹¹ content_idì˜ reason í•„ë“œë¥¼ ì¶”ì¶œí•œë‹¤.

**Supabase JS êµ¬í˜„**: `.contains()` ë˜ëŠ” RPC ì‚¬ìš©. ëŒ€ì•ˆìœ¼ë¡œ Supabase JSì—ì„œ ì§ì ‘ JSONB í•„í„°ê°€ ì œí•œì ì´ë¯€ë¡œ, ê°€ì¥ ìµœê·¼ 7ì¼ briefingsë¥¼ ì¡°íšŒí•œ ë’¤ JSì—ì„œ í•„í„°ë§í•œë‹¤.

```typescript
// ì‹¤ì œ êµ¬í˜„: ìµœê·¼ 7ì¼ briefingsì—ì„œ JS í•„í„°
const { data: recentBriefings } = await supabase
  .from('briefings')
  .select('id, items')
  .gte('briefing_date', sevenDaysAgo)
  .order('briefing_date', { ascending: false })
  .limit(7);

const matchingBriefing = recentBriefings?.find((b) =>
  (b.items as BriefingItem[]).some((item) => item.content_id === contentId)
);
```

### 6.4 ê´€ë ¨ ì•„ì´í…œ ì¡°íšŒ (tags overlap)

```sql
SELECT id, channel, title, summary_ai, source, source_url
FROM content_items
WHERE tags && '{tag1, tag2, tag3}'::text[]
  AND id != '{current_content_id}'
ORDER BY collected_at DESC
LIMIT 5;
```

**Supabase JS êµ¬í˜„**: `.overlaps()` í•„í„° ì‚¬ìš©.

```typescript
const { data: relatedItems } = await supabase
  .from('content_items')
  .select('id, channel, title, summary_ai, source, source_url')
  .overlaps('tags', currentTags)
  .neq('id', contentId)
  .order('collected_at', { ascending: false })
  .limit(5);
```

**ì‚¬ìš© ì¸ë±ìŠ¤**: tagsì— GIN ì¸ë±ìŠ¤ê°€ í•„ìš”í•˜ë‹¤. ì´ˆê¸°ì—ëŠ” ë°ì´í„°ëŸ‰ì´ ì ì–´ ìˆœì°¨ ìŠ¤ìº”ìœ¼ë¡œë„ ì¶©ë¶„í•˜ì§€ë§Œ, ì„±ëŠ¥ ì €í•˜ ì‹œ GIN ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•œë‹¤.

---

## 7. ì‹œí€€ìŠ¤ íë¦„

### 7.1 ì•„ì´í…œ ìƒì„¸ ì¡°íšŒ

```
ì‚¬ìš©ì â†’ ë¸Œë¦¬í•‘ ì¹´ë“œ íƒ­
  â†’ ë¸Œë¼ìš°ì € /item/[id] ì´ë™
    â†’ ItemDetailView ë§ˆìš´íŠ¸
      â†’ GET /api/content/[id]
        â†’ getAuthUser() ê²€ì¦
        â†’ content_items SELECT (ë‹¨ê±´)
        â†’ user_interactions SELECT (ë°˜ì‘ + ë©”ëª¨)
        â†’ briefings ì¡°íšŒ (reason)
        â†’ content_items SELECT (ê´€ë ¨ ì•„ì´í…œ, tags overlap)
        â†’ 200 ContentDetailResponse
      â†’ UI ë Œë”ë§
```

### 7.2 ë©”ëª¨ ì €ì¥

```
ì‚¬ìš©ì â†’ ë©”ëª¨ textarea ì…ë ¥
  â†’ "ì €ì¥" ë²„íŠ¼ í´ë¦­
    â†’ POST /api/interactions
      â†’ { content_id, briefing_id, interaction: 'ë©”ëª¨', memo_text, source: 'web' }
      â†’ 201 Created
    â†’ í† ìŠ¤íŠ¸ "ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤" í‘œì‹œ
```

### 7.3 ì›ë¬¸ ë§í¬ í´ë¦­

```
ì‚¬ìš©ì â†’ "ì›ë¬¸ ê¸°ì‚¬ ì½ê¸°" ë²„íŠ¼ í´ë¦­
  â†’ ìƒˆ íƒ­ì—ì„œ source_url ì—´ê¸°
  â†’ POST /api/interactions (ë¹„ë™ê¸°, ë°±ê·¸ë¼ìš´ë“œ)
    â†’ { content_id, briefing_id, interaction: 'ì›¹ì—´ê¸°', source: 'web' }
```

---

## 8. ì˜í–¥ ë²”ìœ„

### ìˆ˜ì • í•„ìš” íŒŒì¼

| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© |
|------|----------|
| `app/(web)/item/[id]/page.tsx` | stub êµì²´ -> ItemDetailView ë Œë”ë§ |

### ì‹ ê·œ ìƒì„± íŒŒì¼

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `app/api/content/[id]/route.ts` | ì½˜í…ì¸  ìƒì„¸ API |
| `components/item/ItemDetailView.tsx` | ìƒì„¸ í˜ì´ì§€ ë©”ì¸ ì»´í¬ë„ŒíŠ¸ |
| `components/item/AISummarySection.tsx` | AI ìš”ì•½ ì„¹ì…˜ |
| `components/item/ItemMeta.tsx` | ë©”íƒ€ ì •ë³´ (ì†ŒìŠ¤, ì‹œê°„, íƒœê·¸) |
| `components/item/OriginalLink.tsx` | ì›ë¬¸ ë§í¬ ë²„íŠ¼ |
| `components/item/MemoInput.tsx` | ë©”ëª¨ ì…ë ¥ + ì €ì¥ |
| `components/item/RelatedItems.tsx` | ê´€ë ¨ ì•„ì´í…œ ëª©ë¡ |

### ì¬ì‚¬ìš© íŒŒì¼

| íŒŒì¼ | ì¬ì‚¬ìš© ë‚´ìš© |
|------|------------|
| `components/briefing/ChannelBadge.tsx` | ì±„ë„ ë±ƒì§€ + `getChannelAccentColor()` |
| `components/briefing/FeedbackButtons.tsx` | í”¼ë“œë°± ë²„íŠ¼ í–‰ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸) |
| `lib/supabase/auth.ts` | `getAuthUser()` |
| `lib/supabase/server.ts` | `createServerClient()` |
| `lib/utils/date.ts` | KST ë‚ ì§œ ë³€í™˜ |

---

## 9. ì„±ëŠ¥ ì„¤ê³„

### 9.1 ì¿¼ë¦¬ ìµœì í™”

| í•­ëª© | ëŒ€ì±… |
|------|------|
| N+1 ë°©ì§€ | 4ê°œ ì¿¼ë¦¬ ê³ ì • (content, interactions, briefing, related) |
| ê´€ë ¨ ì•„ì´í…œ ì œí•œ | LIMIT 5 |
| briefing reason | ìµœê·¼ 7ì¼ë§Œ ì¡°íšŒ (LIMIT 7) + JS í•„í„° |
| ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ | ê° ì¿¼ë¦¬ì—ì„œ í•„ìš” í•„ë“œë§Œ SELECT |

### 9.2 ì¸ë±ìŠ¤ ê³„íš

| ì¸ë±ìŠ¤ | ìƒíƒœ | ìš©ë„ |
|--------|------|------|
| `content_items.id` (PK) | ê¸°ì¡´ | ë‹¨ê±´ ì¡°íšŒ |
| `idx_interactions_content` | ê¸°ì¡´ | content_id ê¸°ë°˜ ë°˜ì‘ ì¡°íšŒ |
| `idx_briefings_date` | ê¸°ì¡´ | ìµœê·¼ briefings ì¡°íšŒ |
| `idx_content_items_tags` (GIN) | ì¶”í›„ ì¶”ê°€ | tags overlap ì„±ëŠ¥ (ë°ì´í„°ëŸ‰ ì¦ê°€ ì‹œ) |

### 9.3 ìºì‹±

- ì½˜í…ì¸  ìƒì„¸ ë°ì´í„°ëŠ” ê±°ì˜ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ stale-time 10ë¶„ ì ìš© ê°€ëŠ¥
- ê´€ë ¨ ì•„ì´í…œë„ íƒœê·¸ ê¸°ë°˜ì´ë¯€ë¡œ ìºì‹±ì— ì í•©

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| 2026-02-28 | F-09 ê¸°ëŠ¥ ì„¤ê³„ì„œ ì´ˆì•ˆ ì‘ì„± |
