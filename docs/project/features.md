# 기능 백로그

## 기능 목록

| ID | 기능명 | 설명 | 우선순위 | 의존성 | 병렬 그룹 | 마일스톤 | 상태 |
|----|--------|------|----------|--------|-----------|----------|------|
| F-01 | TECH 채널 수집 | HN, GitHub Trending, RSS, arXiv, Tech 블로그에서 기술 콘텐츠 수집 | P0 | - | A | M1 | ✅ 완료 |
| F-02 | WORLD 채널 수집 | 네이버/다음/연합뉴스/BBC Korea/NYT에서 핵심 이슈 수집 | P0 | - | A | M1 | ✅ 완료 |
| F-03 | CULTURE 채널 수집 | 네이버 실검, 멜론, 넷플릭스, 유튜브 트렌딩에서 문화 트렌드 수집 | P0 | - | A | M1 | ✅ 완료 |
| F-04 | TORONTO 채널 수집 | Toronto Star, CBC, 토론토 날씨 등 가족 생활 맥락 수집 | P0 | - | A | M1 | ✅ 완료 |
| F-05 | AI 요약/스코어링 | Claude API로 콘텐츠 1~2줄 요약 + 채널별 관심도 스코어링 | P0 | F-01, F-02, F-03, F-04 | - | M1 | ✅ 완료 |
| F-06 | 텔레그램 브리핑 발송 | 매일 07:00 5채널 구성 브리핑을 텔레그램으로 발송 (Vercel Cron) | P0 | F-05 | - | M1 | ✅ 완료 |
| F-07 | 텔레그램 봇 명령어 | /good, /bad, /save, /more, /keyword, /stats, /mute 명령어 처리 | P0 | F-06 | - | M1 | ✅ 완료 |
| F-08 | 웹 브리핑 뷰어 | 오늘 브리핑 카드 UI + 피드백 버튼 (좋아요/싫어요/저장/메모) | P1 | F-06 | B | M2 | ✅ 완료 |
| F-09 | 웹 아이템 상세 | AI 요약 + 원문 링크 + 메모 입력 상세 페이지 | P1 | F-08 | - | M2 | ✅ 완료 |
| F-10 | 웹 브리핑 히스토리 | 날짜별 과거 브리핑 + 저장 목록 조회 | P1 | F-08 | - | M2 | ✅ 완료 |
| F-11 | 사용자 반응 수집 | 텔레그램/웹 양쪽에서 반응 로그를 수집하여 DB 저장 | P1 | F-07, F-08 | B | M2 | ✅ 완료 |
| F-12 | 인증 (Supabase Auth) | Supabase Auth + 텔레그램 로그인 위젯으로 웹 인증 | P1 | - | B | M2 | ✅ 완료 |
| F-13 | 학습 엔진 (EMA 스코어링) | 반응 기반 관심사 토픽 EMA 업데이트 + pgvector 임베딩 | P1 | F-11 | C | M3 | ✅ 완료 |
| F-14 | 웹 관심사 프로필 | 토픽별 스코어 시각화 + 수동 추가/삭제/조정 | P1 | F-13 | C | M3 | ✅ 완료 |
| F-15 | 긴급 알림 시스템 | 토론토 날씨 경보, 관심 키워드 속보, My Life OS 매칭 등 Tier 2 알림 | P1 | F-13 | C | M3 | ✅ 완료 |
| F-16 | 평일/주말 브리핑 분리 | 평일 속도감 요약 vs 주말 Weekly Digest 포맷 분기 | P1 | F-06 | - | M3 | ✅ 완료 |
| F-17 | 피로도 방지 장치 | 채널 일시 중단, 방학 모드, 아이템 수 자동 조절, 중복 이슈 필터 | P1 | F-13 | - | M3 | ✅ 완료 |
| F-20 | 웹 설정 페이지 | RSS 소스 관리, 알림 설정, 채널 ON/OFF, My Life OS 연동 토글 | P1 | F-12, F-15 | - | M3 | 대기 |
| F-23 | 세렌디피티 채널 | 전 채널 랜덤 + 관심사 인접 영역 추천 (역가중치) | P1 | F-13 | - | M3 | 대기 |
| F-18 | My Life OS 컨텍스트 연동 | 일기/할일/메모 키워드 추출 + 브리핑 가중치 반영 + 이유 표시 | P2 | F-13 | D | M4 | 대기 |
| F-19 | 읽기 루프 (저장-완독-보관) | 저장 아이템 상태 관리 + 리마인더 시스템 + 30일 보관 정책 | P2 | F-11 | D | M4 | 대기 |
| F-21 | 관심사 지형도 | 버블 차트로 관심사 시각화 (인사이트 페이지) | P2 | F-14 | E | M5 | 대기 |
| F-22 | AI 월간 리포트 | 월간 관심사 분석 + My Life OS 교차 인사이트 + AI 한줄 코멘트 | P2 | F-18 | E | M5 | 대기 |
| F-24 | 주간 AI 요약 | 이번 주 기술 트렌드 3줄 요약 + 세렌디피티 효과 측정 | P2 | F-23 | E | M5 | 대기 |

## 인수조건

### F-01: TECH 채널 수집
- [ ] AC1: Hacker News Firebase API에서 Top Stories 50개를 가져와 스코어 기준 상위 10개를 필터링한다
- [ ] AC2: GitHub Trending 페이지를 파싱하여 일별 트렌딩 20개 저장소를 수집한다
- [ ] AC3: 사용자 정의 RSS URL 목록에서 피드당 최신 5개 아이템을 수집한다
- [ ] AC4: 수집된 콘텐츠는 content_items 테이블에 channel='tech'로 저장된다
- [ ] AC5: source_url 기준 중복 수집을 방지한다 (UNIQUE 제약)
- [ ] AC6: 개별 소스 수집 실패 시 다른 소스 수집은 계속 진행된다 (독립 try/catch)

### F-02: WORLD 채널 수집
- [ ] AC1: 네이버 뉴스 RSS에서 정치/경제/사회/IT 섹션별 20개씩 수집하여 상위 3개를 필터링한다
- [ ] AC2: 다음 뉴스 RSS에서 주요뉴스 50개를 수집하여 상위 2개를 필터링한다
- [ ] AC3: 연합뉴스 RSS에서 주요뉴스 100개를 수집하여 상위 2개를 필터링한다
- [ ] AC4: 수집된 헤드라인들 중 동일 이슈가 여러 소스에서 반복 등장할수록 가중치를 부여한다
- [ ] AC5: 수집된 콘텐츠는 content_items 테이블에 channel='world'로 저장된다

### F-03: CULTURE 채널 수집
- [ ] AC1: 네이버 실시간 급상승 검색어 TOP 20에서 상위 5개를 수집한다
- [ ] AC2: 네이버 데이터랩 API에서 검색어/쇼핑 트렌드 TOP 10을 수집한다
- [ ] AC3: 넷플릭스 한국 TOP 10에서 1위 콘텐츠를 수집한다
- [ ] AC4: 멜론 실시간 차트 TOP 5를 수집한다
- [ ] AC5: 유튜브 트렌딩 KR (YouTube Data API v3)에서 TOP 10 중 상위 2개를 수집한다
- [ ] AC6: 수집된 콘텐츠는 content_items 테이블에 channel='culture'로 저장된다

### F-04: TORONTO 채널 수집
- [ ] AC1: Toronto Star RSS에서 주요뉴스 30개를 수집하여 상위 2개를 필터링한다
- [ ] AC2: CBC News Canada RSS에서 30개를 수집하여 상위 2개를 필터링한다
- [ ] AC3: OpenWeatherMap API에서 토론토 날씨(현재기온/최고/최저/날씨상태)를 매일 수집한다
- [ ] AC4: 날씨 데이터는 매일 브리핑에 고정 포함된다
- [ ] AC5: 수집된 콘텐츠는 content_items 테이블에 channel='canada'로 저장된다

### F-05: AI 요약/스코어링
- [ ] AC1: Claude API를 호출하여 수집된 각 콘텐츠에 대해 1~2줄 한국어 요약을 생성한다
- [ ] AC2: TECH 채널은 관심도x0.6 + 컨텍스트x0.3 + 최신성x0.1 가중치로 스코어를 산출한다
- [ ] AC3: WORLD 채널은 Claude가 "40~50대 직장인이 알아야 할 이슈"를 기준으로 최대 2개를 선정한다
- [ ] AC4: CULTURE 채널은 플랫폼 순위 + 검색량 기반으로 선정한다
- [ ] AC5: TORONTO 채널은 뉴스 중요도 기준 선정 + 날씨 고정 포함한다
- [ ] AC6: 동일 URL에 대한 재요약을 방지한다 (캐싱)
- [ ] AC7: 전체 수집-요약 파이프라인이 30분 이내에 완료된다

### F-06: 텔레그램 브리핑 발송
- [ ] AC1: 매일 07:00에 Vercel Cron이 브리핑 발송을 트리거한다
- [ ] AC2: 메시지는 5채널 구조(TECH/WORLD/CULTURE/TORONTO/세렌디피티)로 구성된다
- [ ] AC3: 각 아이템에 번호, 소스, 제목, 1줄 AI 요약이 포함된다
- [ ] AC4: 메시지 하단에 "자세히 보기"(웹 URL)와 "설정" 링크가 포함된다
- [ ] AC5: briefings 테이블에 발송 기록이 저장된다 (items JSONB)
- [ ] AC6: 발송 실패 시 30분 후 1회 재시도한다

### F-07: 텔레그램 봇 명령어
- [ ] AC1: /good -- 마지막 브리핑 전체 긍정 반응을 기록한다
- [ ] AC2: /bad -- 마지막 브리핑 전체 부정 반응을 기록하고 어떤 주제가 별로였는지 물어본다
- [ ] AC3: /save N -- N번째 아이템을 저장(북마크)한다
- [ ] AC4: /more -- 오늘 브리핑 웹 상세페이지 URL을 발송한다
- [ ] AC5: /keyword XXX -- 관심 키워드를 즉시 추가한다
- [ ] AC6: /stats -- 이번 달 관심 토픽 Top 5와 읽은 아티클 수를 응답한다
- [ ] AC7: /mute N -- N일간 브리핑을 중단한다 (방학 모드)
- [ ] AC8: 웹훅 엔드포인트(/api/telegram/webhook)에서 텔레그램 시크릿 토큰을 검증한다

### F-08: 웹 브리핑 뷰어
- [ ] AC1: / 라우트에서 오늘 브리핑을 채널별 카드 형태로 표시한다
- [ ] AC2: 모바일 우선 1열 레이아웃으로 구현한다
- [ ] AC3: 각 카드에 [채널 뱃지][소스][제목][1~2줄 AI 요약][피드백 버튼 행]이 표시된다
- [ ] AC4: 피드백 버튼(좋아요/싫어요/저장/메모)을 탭하면 즉시 색상 변경(낙관적 업데이트)된다
- [ ] AC5: My Life OS 연동 시 이유 표시 아이콘이 카드에 포함된다

### F-09: 웹 아이템 상세
- [ ] AC1: /item/[id] 라우트에서 개별 콘텐츠 상세 정보를 표시한다
- [ ] AC2: AI 요약 전문, 원문 링크, 소스, 수집 시간이 표시된다
- [ ] AC3: 메모 입력 필드가 제공되며 저장 시 user_interactions에 interaction='메모'로 기록된다
- [ ] AC4: 관련 아이템(같은 토픽) 목록이 하단에 표시된다

### F-10: 웹 브리핑 히스토리
- [ ] AC1: /history 라우트에서 날짜별 과거 브리핑 목록을 조회할 수 있다
- [ ] AC2: 날짜 선택 시 해당 일자 브리핑 아이템이 표시된다
- [ ] AC3: 저장(북마크)한 아이템만 필터링하여 볼 수 있다
- [ ] AC4: 페이지네이션 또는 무한 스크롤을 지원한다

### F-11: 사용자 반응 수집
- [ ] AC1: 텔레그램 인라인 버튼(좋아요/싫어요/저장) 클릭 시 user_interactions 테이블에 기록된다
- [ ] AC2: 웹 피드백 버튼 클릭 시 /api/interactions API를 통해 기록된다
- [ ] AC3: 반응 타입별로 interaction 컬럼에 '좋아요'|'싫어요'|'저장'|'메모'|'웹열기'|'링크클릭'|'스킵'이 저장된다
- [ ] AC4: 반응 소스(telegram_bot/web)가 source 컬럼에 기록된다
- [ ] AC5: 브리핑에 포함되었으나 24시간 내 무반응 아이템은 '스킵'으로 자동 기록된다

### F-12: 인증 (Supabase Auth)
- [ ] AC1: Supabase Auth를 통해 웹 로그인/로그아웃이 동작한다
- [ ] AC2: 텔레그램 로그인 위젯으로 텔레그램 계정과 웹 계정이 연동된다
- [ ] AC3: 인증되지 않은 사용자는 웹 페이지에 접근할 수 없다 (리다이렉트)
- [ ] AC4: RLS 정책이 설정되어 본인 데이터만 조회 가능하다

### F-13: 학습 엔진 (EMA 스코어링)
- [ ] AC1: AI가 아티클에서 토픽을 자동 추출하여 interest_profile에 등록한다
- [ ] AC2: 반응 타입별 점수 변화(좋아요 +0.15, 싫어요 -0.20 등)가 적용된다
- [ ] AC3: 토픽별 스코어가 지수이동평균(EMA, alpha=0.3)으로 업데이트된다
- [ ] AC4: pgvector로 콘텐츠/토픽 임베딩이 생성되어 유사도 검색이 가능하다
- [ ] AC5: 스코어 0.2 이하 토픽은 3개월 후 자동 보관 처리된다
- [ ] AC6: 학습된 스코어가 다음날 TECH 채널 브리핑 선정에 반영된다

### F-14: 웹 관심사 프로필
- [ ] AC1: /profile 라우트에서 토픽별 관심도 스코어가 차트로 시각화된다
- [ ] AC2: 토픽을 수동으로 추가/삭제/스코어 조정할 수 있다
- [ ] AC3: 상위 관심사 Top 10이 하이라이트 표시된다
- [ ] AC4: 3개월간 보관 처리된 토픽도 확인할 수 있다

### F-15: 긴급 알림 시스템
- [ ] AC1: 1시간마다 Vercel Cron이 긴급 알림 트리거를 체크한다
- [ ] AC2: 토론토 폭설 15cm+, 한파 -20도, 폭풍 경보 시 텔레그램 알림을 발송한다
- [ ] AC3: interest_profile 상위 3개 토픽에서 HN 500+ 포인트 아이템 발견 시 알림을 발송한다
- [ ] AC4: 같은 이슈로 당일 이미 알림을 보낸 경우 재발송하지 않는다
- [ ] AC5: 하루 최대 3회 하드 캡이 적용된다
- [ ] AC6: 방해 금지 시간대(기본 23:00~07:00)에는 발송하지 않는다
- [ ] AC7: alert_settings 테이블에서 트리거별 ON/OFF를 관리한다

### F-16: 평일/주말 브리핑 분리
- [ ] AC1: 평일(월~금) 브리핑은 07:00에 7~8개 아이템, 제목+1줄 요약+피드백 버튼 포맷으로 발송된다
- [ ] AC2: 주말(토~일) 브리핑은 09:00에 5개 엄선 아이템, 제목+3줄 요약+"왜 중요한가" 포맷으로 발송된다
- [ ] AC3: 토요일 브리핑에 Weekly Digest 섹션이 포함된다 (이번 주 좋아요 Top 3, 미완독 리마인더, 토론토 주간 날씨, AI 한줄 코멘트)

### F-17: 피로도 방지 장치
- [ ] AC1: 웹 /settings에서 채널별 ON/OFF 토글이 가능하다
- [ ] AC2: /mute N 명령어로 N일간 브리핑을 중단할 수 있다
- [ ] AC3: 7일 연속 무반응 시 아이템 수가 자동으로 2개 감소한다
- [ ] AC4: 3일 연속 같은 이슈가 등장하면 "계속 팔로우 중"으로 축약 표시된다

### F-18: My Life OS 컨텍스트 연동
- [ ] AC1: My Life OS의 diary_entries 테이블에서 최근 7일 일기 텍스트의 키워드를 추출한다
- [ ] AC2: todos/notes 테이블에서 미완료 태스크와 메모 제목의 키워드를 추출한다
- [ ] AC3: keyword_contexts 테이블에 키워드를 저장하며 7일 TTL이 적용된다
- [ ] AC4: 컨텍스트 매칭 아이템에 "지난주 메모: {키워드} 관련 아티클 포함" 이유가 표시된다
- [ ] AC5: 웹 /settings에서 My Life OS 연동 ON/OFF 토글이 가능하다
- [ ] AC6: 일기 원문은 저장하지 않고 키워드만 추출한다 (프라이버시)

### F-19: 읽기 루프 (저장-완독-보관)
- [ ] AC1: 저장 아이템에 상태(저장완료/읽는중/완독/보관)가 관리된다
- [ ] AC2: 원문 링크 클릭 시 "읽는 중" 상태로 자동 전환된다
- [ ] AC3: 사용자가 "완독" 체크를 수동으로 할 수 있다
- [ ] AC4: 저장 후 30일 경과 + 미완독 시 "보관" 상태로 자동 전환된다
- [ ] AC5: 토요일 Weekly Digest에 미완독 아이템 리마인더가 포함된다
- [ ] AC6: 25일 경과 미완독 아이템에 대해 "곧 보관 처리" 알림을 발송한다
- [ ] AC7: 매월 마지막 날 월간 미완독 요약을 발송한다

### F-20: 웹 설정 페이지
- [ ] AC1: /settings 라우트에서 사용자 정의 RSS 소스 URL을 추가/삭제할 수 있다
- [ ] AC2: 채널별(TECH/WORLD/CULTURE/TORONTO) ON/OFF 토글이 가능하다
- [ ] AC3: 긴급 알림 트리거별 ON/OFF 설정이 가능하다
- [ ] AC4: 방해 금지 시간대를 설정할 수 있다
- [ ] AC5: My Life OS 연동 ON/OFF 토글이 가능하다
- [ ] AC6: 텔레그램 chat_id 연동 상태를 확인할 수 있다

### F-21: 관심사 지형도
- [ ] AC1: /insights 라우트에서 관심사가 버블 차트로 시각화된다
- [ ] AC2: 버블 크기가 토픽 스코어에 비례한다
- [ ] AC3: 최근 30일 스코어 변화 추이가 표시된다

### F-22: AI 월간 리포트
- [ ] AC1: 매월 1일에 지난달 완독 아이템 + My Life OS 일기를 교차 분석한 리포트가 생성된다
- [ ] AC2: 핵심 관심사, 눈에 띄는 변화, My Life OS 연동 인사이트, 추천 후속 질문이 포함된다
- [ ] AC3: 리포트가 텔레그램과 웹 /insights에서 모두 조회 가능하다
- [ ] AC4: 이번 달 가장 많이 읽은 주제 Top 5가 포함된다

### F-23: 세렌디피티 채널
- [ ] AC1: 전 채널에서 관심사 인접 영역의 콘텐츠를 랜덤 선정한다
- [ ] AC2: 약한 역가중치를 적용하여 평소 관심사와 다른 영역이 선택되도록 한다
- [ ] AC3: 매일 브리핑에 1개 세렌디피티 아이템이 포함된다
- [ ] AC4: 세렌디피티 아이템에 대한 반응이 별도로 추적된다

### F-24: 주간 AI 요약
- [ ] AC1: 매주 토요일 브리핑에 "이번 주 기술 트렌드 3줄 요약"이 포함된다
- [ ] AC2: 세렌디피티 효과(예상 밖 관심사 발견)가 측정되어 보고된다
- [ ] AC3: "이번 주 당신의 관심은 {토픽}에 집중됐어요" AI 한줄 코멘트가 포함된다

### 병렬 그룹 규칙
- 같은 마일스톤 내에서만 그룹 구성
- 그룹 내 기능 간 상호 의존성 없음
- 그룹 내 기능 간 충돌 영역 미겹침
- 그룹당 최대 3개 기능
- **그룹 A**: F-01 ~ F-04 (4채널 수집기 -- 채널별 독립, 예외적으로 4개 허용)
- **그룹 B**: F-08, F-11, F-12 (웹 프론트엔드 기반 + 반응 수집 + 인증)
- **그룹 C**: F-13, F-14, F-15 (학습 엔진 + 프로필 시각화 + 알림)
- **그룹 D**: F-18, F-19 (My Life OS 연동 + 읽기 루프)
- **그룹 E**: F-21, F-22, F-24 (인사이트 시각화 + 리포트)

### 상태 범례
- 대기 / 진행중 / 완료 / 보류 / 취소
